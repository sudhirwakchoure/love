<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            text-align: center;
            background-color: #fdf2f8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            overflow-x: hidden;
            position: relative;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 1;
        }
        
        h1 {
            margin: 5px 0 10px 0;
            font-size: clamp(28px, 4vw, 38px);
            color: #ff3366;
            text-shadow: 2px 2px 6px #ff99aa;
            padding: 0 10px;
            line-height: 1.2;
        }
        
        #messageContainer {
            margin: 5px auto;
            padding: 10px 20px;
            visibility: hidden;
            opacity: 0;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 20px rgba(255, 51, 102, 0.4);
            min-width: fit-content;
            max-width: 90%;
            width: 300px;
            z-index: 10;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }
        
        .love-message {
            font-size: clamp(24px, 3.5vw, 36px);
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 10px;
            display: inline-block;
            transition: all 1s ease;
            word-wrap: break-word;
            text-align: center;
            white-space: nowrap;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
        }
        
        #mediaContainer {
            margin: 10px auto;
            padding: 15px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 0 25px #ff6699;
            display: inline-block;
            max-width: 90%;
            width: 500px;
            min-width: 300px;
        }
        
        #valentineMedia {
            width: 100%;
            height: auto;
            max-width: 100%;
            max-height: 50vh;
            object-fit: contain;
            border-radius: 15px;
            display: block;
        }
        
        #buttons {
            margin: 15px auto;
            padding: 0 10px;
            position: relative;
            min-height: 70px;
            width: 100%;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        button {
            padding: 12px 25px;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 5;
        }
        
        #yesBtn {
            background-color: #ff3366;
            color: white;
            box-shadow: 0 0 15px #ff6699;
            position: relative;
            z-index: 10;
        }
        
        #yesBtn:hover {
            transform: scale(1.05);
            background-color: #ff0066;
        }
        
        #noBtn {
            background-color: #333;
            color: white;
            box-shadow: 0 0 15px #999;
            position: relative;
            z-index: 10;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        #noBtn:hover, #noBtn:active {
            transform: scale(1.05);
        }
        
        /* Special mobile-only positioning for NO button */
        .no-btn-mobile {
            position: fixed !important;
            transition: left 0.3s ease, top 0.3s ease !important;
        }
        
        .show-message {
            visibility: visible !important;
            opacity: 1 !important;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        /* Media controls */
        .media-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .media-btn {
            background-color: #ff3366;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .media-btn:hover {
            background-color: #ff0066;
            transform: scale(1.05);
        }
        
        .media-type {
            font-size: 12px;
            color: #ff3366;
            margin-top: 5px;
            font-weight: bold;
        }
        
        .next-video-btn {
            background-color: #4CAF50;
            margin-top: 10px;
        }
        
        .next-video-btn:hover {
            background-color: #45a049;
        }
        
        /* Responsive adjustments */
        @media (max-height: 700px) {
            #valentineMedia {
                max-height: 45vh;
            }
            
            h1 {
                margin: 3px 0 8px 0;
                font-size: 26px;
            }
            
            #mediaContainer {
                margin: 8px auto;
                padding: 12px;
            }
            
            .love-message {
                font-size: 22px;
                padding: 6px 12px;
            }
            
            #messageContainer {
                height: 70px;
            }
            
            .media-controls {
                margin-top: 8px;
                gap: 10px;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
                overflow: hidden;
            }
            
            #buttons {
                margin: 10px auto;
                min-height: 80px;
                position: relative;
            }
            
            #noBtn {
                position: relative;
                z-index: 100;
                padding: 12px 25px;
                font-size: 18px;
                min-width: auto;
                min-height: auto;
            }
            
            #messageContainer {
                margin: 3px auto 10px auto;
                padding: 8px 12px;
                height: 65px;
                width: 280px;
            }
            
            .love-message {
                font-size: 20px;
                padding: 6px 10px;
                white-space: normal;
            }
            
            #mediaContainer {
                padding: 12px;
                margin: 8px auto;
                max-width: 95%;
                width: 350px;
            }
            
            button {
                padding: 12px 25px;
                font-size: 18px;
                margin: 8px;
            }
            
            h1 {
                font-size: 24px;
                margin: 3px 0 6px 0;
            }
            
            .media-controls {
                gap: 8px;
            }
            
            .media-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
        }
        
        @media (max-width: 480px) {
            #valentineMedia {
                max-height: 40vh;
            }
            
            .love-message {
                font-size: 18px;
                white-space: normal;
            }
            
            h1 {
                font-size: 22px;
            }
            
            #messageContainer {
                height: 60px;
                width: 250px;
            }
            
            #mediaContainer {
                width: 300px;
                margin: 5px auto;
            }
            
            #buttons {
                margin: 8px auto;
                min-height: 90px;
            }
            
            button {
                padding: 12px 25px;
                font-size: 18px;
                margin: 8px;
            }
            
            #noBtn {
                padding: 12px 25px;
                font-size: 18px;
                min-width: auto;
                min-height: auto;
            }
            
            .media-controls {
                gap: 6px;
            }
            
            .media-btn {
                padding: 5px 10px;
                font-size: 12px;
            }
        }
        
        @media (hover: none) and (pointer: coarse) {
            #noBtn {
                padding: 12px 25px;
            }
            
            #noBtn:active {
                background-color: #555;
                transform: scale(0.95);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Would you be my Valentine?</h1>
        
        <!-- Love message container - Space is reserved but invisible -->
        <div id="messageContainer">
            <div class="love-message"></div>
        </div>
        
        <!-- Media container (for images and videos) -->
        <div id="mediaContainer">
            <img id="valentineMedia" src="https://raw.githubusercontent.com/sudhirwakchoure/love/main/1.jpg" alt="Romantic Media">
            
            <!-- Media controls -->
            <div class="media-controls" id="mediaControls">
                <button class="media-btn" id="playPauseBtn" style="display: none;">‚è∏Ô∏è Pause</button>
                <button class="media-btn" id="muteBtn" style="display: none;">üîá Mute</button>
                <button class="media-btn" id="nextVideoBtn" style="display: none;">‚è≠Ô∏è Next Video</button>
                <button class="media-btn" id="showImagesBtn">üì∑ Show Images</button>
                <button class="media-btn" id="showVideosBtn">üé• Show Videos</button>
            </div>
            <div class="media-type" id="mediaType">Currently: Images</div>
        </div>
        
        <!-- Buttons below media -->
        <div id="buttons">
            <button id="yesBtn">Yes üíó</button>
            <button id="noBtn">No</button>
        </div>
    </div>
    
    <script>
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        const messageContainer = document.getElementById("messageContainer");
        const loveMessage = document.querySelector('.love-message');
        const valentineMedia = document.getElementById("valentineMedia");
        const mediaContainer = document.getElementById("mediaContainer");
        const buttonsContainer = document.getElementById("buttons");
        const mediaControls = document.getElementById("mediaControls");
        const playPauseBtn = document.getElementById("playPauseBtn");
        const muteBtn = document.getElementById("muteBtn");
        const nextVideoBtn = document.getElementById("nextVideoBtn");
        const showImagesBtn = document.getElementById("showImagesBtn");
        const showVideosBtn = document.getElementById("showVideosBtn");
        const mediaType = document.getElementById("mediaType");
        
        // Detect if user is on mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        
        // Media sources - FIXED: Removed video files from images array
        const images = [
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/1.jpg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/2.jpg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/3.jpg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/4.jpg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/5.jpg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/6.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/7.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/8.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/9.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/10.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/11.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/12.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/13.jpeg",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/14.jpeg"
        ];
        
        // Video sources - FIXED: Use relative paths for web compatibility
        const videos = [
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/v1.mp4",
            "https://raw.githubusercontent.com/sudhirwakchoure/love/main/v2.mp4"
        ];
        
        // Different love messages
        const loveMessages = [
            "I love you Roshani‚ù§Ô∏è",
            "You're my everythingüíï",
            "My heart beats for youüíì",
            "Forever yoursüíù",
            "You complete me‚ú®",
            "My beautiful Valentineüåπ",
            "Together foreverüíë",
            "You're my dream come trueüåü",
            "My love for you is eternalüíñ",
            "You stole my heartüíò",
            "Can't live without youüíû",
            "You're my sunshine‚òÄÔ∏è",
            "My one and onlyüíé",
            "Love you endlesslyüí´"
        ];
        
        let currentMediaIndex = 0;
        let messageIndex = 0;
        let messageInterval;
        let styleIndex = 0;
        let colorIndex = 0;
        let isShowingImages = true;
        let mediaInterval;
        let isPlaying = true;
        let isMuted = false;
        let currentVideo = null;
        let videoEnded = false;
        
        // Lovable colors for the message
        const messageColors = [
            "#ff3366", "#ff0066", "#ff1493", "#ff69b4", "#ff33cc",
            "#ff00ff", "#ff66b2", "#ff3388", "#ff007f", "#ff3399",
            "#ff33aa", "#ff0088", "#ff3377", "#ff0055", "#ff2266",
            "#e60073", "#cc0066", "#b30059"
        ];
        
        // Different message styles
        const messageStyles = [
            "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            "'Georgia', 'Times New Roman', Times, serif",
            "'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif",
            "'Courier New', Courier, monospace",
            "'Palatino Linotype', 'Book Antiqua', Palatino, serif",
            "'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif",
            "'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif",
            "'Lucida Console', 'Monaco', monospace"
        ];
        
        function changeMedia() {
            if (isShowingImages) {
                // Show next image
                currentMediaIndex = (currentMediaIndex + 1) % images.length;
                valentineMedia.src = images[currentMediaIndex];
                valentineMedia.style.display = 'block';
                
                // Hide video controls if showing images
                playPauseBtn.style.display = 'none';
                muteBtn.style.display = 'none';
                nextVideoBtn.style.display = 'none';
            }
        }
        
        function startMediaSlideshow() {
            clearInterval(mediaInterval);
            if (isShowingImages) {
                // Change image every 3 seconds
                mediaInterval = setInterval(changeMedia, 3000);
            } else {
                // For videos, we don't auto-change
                // Just show the first video
                showVideo();
            }
        }
        
        function showVideo() {
            // Remove previous video if exists
            if (currentVideo) {
                currentVideo.remove();
            }
            
            // Create video element
            currentVideo = document.createElement('video');
            currentVideo.id = 'currentVideo';
            currentVideo.src = videos[currentMediaIndex];
            currentVideo.controls = true;
            currentVideo.muted = isMuted;
            currentVideo.autoplay = true;
            currentVideo.loop = false; // Don't loop - play once
            currentVideo.style.width = '100%';
            currentVideo.style.height = 'auto';
            currentVideo.style.maxHeight = '50vh';
            currentVideo.style.objectFit = 'contain';
            currentVideo.style.borderRadius = '15px';
            currentVideo.style.display = 'block';
            
            // Add event listener for when video ends
            currentVideo.addEventListener('ended', handleVideoEnded);
            
            // Replace image with video
            valentineMedia.style.display = 'none';
            mediaContainer.insertBefore(currentVideo, mediaControls);
            
            // Show video controls
            playPauseBtn.style.display = 'inline-block';
            muteBtn.style.display = 'inline-block';
            nextVideoBtn.style.display = 'inline-block';
            
            // Update button text based on current state
            playPauseBtn.textContent = '‚è∏Ô∏è Pause';
            muteBtn.textContent = isMuted ? 'üîä Unmute' : 'üîá Mute';
            nextVideoBtn.textContent = '‚è≠Ô∏è Next Video';
            
            // Reset video ended flag
            videoEnded = false;
            isPlaying = true;
        }
        
        function handleVideoEnded() {
            videoEnded = true;
            playPauseBtn.textContent = '‚ñ∂Ô∏è Play Again';
        }
        
        function getRandomTime() {
            return Math.floor(Math.random() * 1000) + 3000;
        }
        
        function updateMessageAndImage() {
            // Cycle to next message
            messageIndex = (messageIndex + 1) % loveMessages.length;
            loveMessage.textContent = loveMessages[messageIndex];
            
            // Adjust container width to fit text
            adjustMessageWidth();
            
            // Cycle through colors
            colorIndex = (colorIndex + 1) % messageColors.length;
            
            // Cycle through font styles
            styleIndex = (styleIndex + 1) % messageStyles.length;
            
            // Apply new style with better contrast
            loveMessage.style.color = messageColors[colorIndex];
            const bgColor = messageColors[colorIndex] + "30";
            loveMessage.style.backgroundColor = bgColor;
            loveMessage.style.boxShadow = `0 0 20px ${messageColors[colorIndex]}80`;
            loveMessage.style.fontFamily = messageStyles[styleIndex];
            
            // Also update container shadow
            messageContainer.style.boxShadow = `0 0 30px ${messageColors[colorIndex]}`;
            
            // Change media only if showing images
            if (isShowingImages) {
                changeMedia();
            }
            
            // Schedule next update
            clearTimeout(messageInterval);
            messageInterval = setTimeout(updateMessageAndImage, getRandomTime());
        }
        
        function adjustMessageWidth() {
            // Only adjust if message is visible
            if (messageContainer.classList.contains('show-message')) {
                const textWidth = loveMessage.scrollWidth;
                const containerWidth = Math.min(textWidth + 40, window.innerWidth * 0.9);
                messageContainer.style.width = containerWidth + 'px';
                
                // Adjust media container to match message width
                const mediaWidth = Math.min(containerWidth + 40, window.innerWidth * 0.85);
                mediaContainer.style.maxWidth = mediaWidth + 'px';
            }
        }
        
        function adjustLayout() {
            const viewportHeight = window.innerHeight;
            const totalContentHeight = document.querySelector('.container').scrollHeight;
            
            // Set media container to reasonable size based on viewport
            const viewportWidth = window.innerWidth;
            const mediaContainerWidth = Math.min(500, viewportWidth * 0.85);
            mediaContainer.style.width = mediaContainerWidth + 'px';
            
            if (totalContentHeight > viewportHeight) {
                // Reduce media max height if needed
                const currentMaxHeight = parseInt(getComputedStyle(valentineMedia).maxHeight) || 50;
                const newHeight = Math.max(30, currentMaxHeight - 10);
                valentineMedia.style.maxHeight = newHeight + 'vh';
                if (currentVideo) {
                    currentVideo.style.maxHeight = newHeight + 'vh';
                }
                
                // Reduce margins further
                document.querySelector('.container').style.gap = '5px';
            }
            
            // Adjust message width if visible
            adjustMessageWidth();
        }
        
        // Media control functions
        function togglePlayPause() {
            if (currentVideo) {
                if (videoEnded) {
                    // If video has ended, restart it
                    currentVideo.currentTime = 0;
                    currentVideo.play();
                    videoEnded = false;
                    playPauseBtn.textContent = '‚è∏Ô∏è Pause';
                    isPlaying = true;
                } else if (isPlaying) {
                    currentVideo.pause();
                    playPauseBtn.textContent = '‚ñ∂Ô∏è Play';
                    isPlaying = false;
                } else {
                    currentVideo.play();
                    playPauseBtn.textContent = '‚è∏Ô∏è Pause';
                    isPlaying = true;
                }
            }
        }
        
        function toggleMute() {
            if (currentVideo) {
                currentVideo.muted = !currentVideo.muted;
                isMuted = currentVideo.muted;
                muteBtn.textContent = isMuted ? 'üîä Unmute' : 'üîá Mute';
            }
        }
        
        function nextVideo() {
            if (!isShowingImages && videos.length > 1) {
                currentMediaIndex = (currentMediaIndex + 1) % videos.length;
                showVideo();
            }
        }
        
        function switchToImages() {
            isShowingImages = true;
            mediaType.textContent = 'Currently: Images';
            showImagesBtn.disabled = true;
            showVideosBtn.disabled = false;
            
            // Remove video if it exists
            if (currentVideo) {
                currentVideo.remove();
                currentVideo = null;
            }
            
            // Show the image
            valentineMedia.style.display = 'block';
            valentineMedia.src = images[currentMediaIndex % images.length];
            
            // Hide video controls
            playPauseBtn.style.display = 'none';
            muteBtn.style.display = 'none';
            nextVideoBtn.style.display = 'none';
            
            // Start image slideshow
            startMediaSlideshow();
        }
        
        function switchToVideos() {
            isShowingImages = false;
            mediaType.textContent = 'Currently: Videos';
            showImagesBtn.disabled = false;
            showVideosBtn.disabled = true;
            
            // Reset to first video
            currentMediaIndex = 0;
            
            // Start video display
            startMediaSlideshow();
        }
        
        // Improved mobile movement for NO button
        function moveNoButton() {
            // For mobile/touch devices, use different movement logic
            if (isMobile || isTouchDevice) {
                // Calculate safe area (keeping button within viewport)
                const buttonWidth = noBtn.offsetWidth;
                const buttonHeight = noBtn.offsetHeight;
                
                // Get viewport dimensions
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;
                
                // Calculate safe boundaries (with padding)
                const padding = 20;
                const maxX = viewportWidth - buttonWidth - padding;
                const maxY = viewportHeight - buttonHeight - padding;
                
                // Generate random position within safe area
                const x = Math.max(padding, Math.random() * maxX);
                const y = Math.max(padding, Math.random() * maxY);
                
                // Apply mobile-specific class for smooth transition
                noBtn.classList.add('no-btn-mobile');
                
                // Position the button
                noBtn.style.left = `${x}px`;
                noBtn.style.top = `${y}px`;
                
                // Make sure button stays on top
                noBtn.style.zIndex = '1000';
            } else {
                // Desktop behavior (original logic with improvements)
                const maxX = window.innerWidth - noBtn.offsetWidth - 20;
                const maxY = window.innerHeight - noBtn.offsetHeight - 20;
                
                const x = Math.random() * maxX;
                const y = Math.random() * maxY;
                
                noBtn.style.position = "fixed";
                noBtn.style.left = `${x}px`;
                noBtn.style.top = `${y}px`;
                noBtn.style.zIndex = '1000';
            }
        }
        
        yesBtn.addEventListener("click", () => {
            // Show the message container with fade-in effect
            messageContainer.classList.add('show-message');
            
            // Set initial message
            messageIndex = 0;
            loveMessage.textContent = loveMessages[messageIndex];
            
            // Apply initial style with better readability
            loveMessage.style.color = messageColors[colorIndex];
            loveMessage.style.backgroundColor = messageColors[colorIndex] + "30";
            loveMessage.style.boxShadow = `0 0 20px ${messageColors[colorIndex]}80`;
            loveMessage.style.fontFamily = messageStyles[styleIndex];
            loveMessage.style.textShadow = "2px 2px 4px rgba(0, 0, 0, 0.3)";
            messageContainer.style.boxShadow = `0 0 30px ${messageColors[colorIndex]}`;
            
            // Adjust message width to fit text
            setTimeout(() => {
                adjustMessageWidth();
                adjustLayout();
            }, 100);
            
            // Change button text and disable buttons
            yesBtn.textContent = "You said YES! üíï";
            yesBtn.style.backgroundColor = "#ff0066";
            yesBtn.disabled = true;
            noBtn.style.display = "none";
            
            // Start changing message
            messageInterval = setTimeout(updateMessageAndImage, getRandomTime());
        });
        
        // Handle both hover (desktop) and touch (mobile) events
        if (isMobile || isTouchDevice) {
            // For mobile/touch devices
            noBtn.addEventListener("touchstart", (e) => {
                e.preventDefault();
                moveNoButton();
            });
            
            noBtn.addEventListener("click", (e) => {
                e.preventDefault();
                moveNoButton();
            });
        } else {
            // For desktop with mouse
            noBtn.addEventListener("mouseover", () => {
                moveNoButton();
            });
        }
        
        // Also move on click for extra assurance
        noBtn.addEventListener("click", (e) => {
            if (!isMobile && !isTouchDevice) {
                e.preventDefault();
                moveNoButton();
            }
        });
        
        // Media control event listeners
        playPauseBtn.addEventListener('click', togglePlayPause);
        muteBtn.addEventListener('click', toggleMute);
        nextVideoBtn.addEventListener('click', nextVideo);
        showImagesBtn.addEventListener('click', switchToImages);
        showVideosBtn.addEventListener('click', switchToVideos);
        
        // Adjust layout on window resize
        window.addEventListener('resize', () => {
            adjustLayout();
            // Reset button position on resize
            noBtn.style.position = "relative";
            noBtn.style.left = "auto";
            noBtn.style.top = "auto";
            noBtn.classList.remove('no-btn-mobile');
        });
        
        // Preload images
        function preloadImages() {
            for (let i = 0; i < images.length; i++) {
                const img = new Image();
                img.src = images[i];
                img.onload = function() {
                    // Adjust layout after each image loads
                    adjustLayout();
                };
            }
        }
        
        // Initial setup
        window.addEventListener('load', () => {
            // Set initial media container size
            const viewportWidth = window.innerWidth;
            const mediaContainerWidth = Math.min(500, viewportWidth * 0.85);
            mediaContainer.style.width = mediaContainerWidth + 'px';
            
            // Set message container initial width
            messageContainer.style.width = Math.min(300, viewportWidth * 0.7) + 'px';
            
            // Start media slideshow
            startMediaSlideshow();
            
            // Adjust layout
            setTimeout(adjustLayout, 100);
            setTimeout(adjustLayout, 500);
            
            // Disable images button since we start with images
            showImagesBtn.disabled = true;
            
            // Log device info for debugging
            console.log("Device Info:", {
                isMobile: isMobile,
                isTouchDevice: isTouchDevice,
                userAgent: navigator.userAgent
            });
        });
        
        // Also adjust on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            // Initial reasonable sizes
            const viewportWidth = window.innerWidth;
            mediaContainer.style.width = Math.min(500, viewportWidth * 0.85) + 'px';
            messageContainer.style.width = Math.min(300, viewportWidth * 0.7) + 'px';
        });
        
        // Start preloading images
        preloadImages();
    </script>
</body>
</html>
